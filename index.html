<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>Sarvar Cloud Control</title>
    <style>
        button:active { transform: scale(0.95); }
        button:hover { opacity: 0.8; cursor: pointer; }
        .btn-anim { transition: all 0.2s ease; }
    </style>
</head>
<body style="background: #0f172a; display: flex; justify-content: center; padding-top: 50px;">

<div class="render-clone-box" style="background: #1e293b; color: white; padding: 20px; border-radius: 15px; width: 400px; font-family: sans-serif;">
    <h2 style="text-align: center; color: #00ff88;">üöÄ Sarvar Cloud Control</h2>
    
    <input type="file" id="fileInput" style="margin-bottom: 15px; width: 100%;">
    
    <div style="display: flex; gap: 10px;">
        <button class="btn-anim" onclick="handleUpload()" style="background: #3b82f6; color: white; border: none; padding: 12px; border-radius: 8px; flex: 1;">üì§ Upload</button>
        <button class="btn-anim" onclick="handleStart()" style="background: #00ff88; color: #0f172a; border: none; padding: 12px; border-radius: 8px; flex: 1; font-weight: bold;">‚ñ∂Ô∏è Start</button>
        <button class="btn-anim" onclick="handleStop()" style="background: #ef4444; color: white; border: none; padding: 12px; border-radius: 8px; flex: 1;">üõë Stop</button>
    </div>

    <div id="logConsole" style="background: #000; color: #00ff00; height: 150px; overflow-y: auto; margin-top: 15px; padding: 10px; font-family: monospace; font-size: 12px; border-radius: 5px; border: 1px solid #334155;">
        > Tizim tayyor...
    </div>
</div>

<script>
    const logs = document.getElementById("logConsole");

    function writeLog(msg) {
        logs.innerHTML += `> ${msg}<br>`;
        logs.scrollTop = logs.scrollHeight;
    }

    // --- UPLOAD QISMI (Hozircha faqat simulyatsiya) ---
    function handleUpload() {
        writeLog("Fayl yuklash tizimi ishga tushdi...");
        const file = document.getElementById("fileInput").files[0];
        if (file) {
            writeLog(`‚úÖ Fayl tanlandi: ${file.name}`);
        } else {
            alert("Oldin faylni tanlang!");
        }
    }

    // --- START QISMI (ASOSIY KOD) ---
    async function handleStart() {
        writeLog("üöÄ Render API-ga ulanishga urinilmoqda...");
        
        // ‚ö†Ô∏è DIQQAT: SERVICE_ID ni Render Dashboard-dan olib shu yerga qo'y!
        // U URL'da srv- bilan boshlanadi
        const SERVICE_ID = "srv-bu-yerga-idni-qo'y"; 
        const API_KEY = "rnd_itR5VFBcsvLZHQlyywyicCcjblYg";

        try {
            const response = await fetch(`https://api.render.com/v1/services/${SERVICE_ID}/deploys`, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${API_KEY}`,
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                }
            });

            if (response.ok) {
                const data = await response.json();
                writeLog("‚úÖ Muvaffaqiyatli! Loyiha 24/7 rejimda qayta ishga tushdi.");
                console.log(data);
            } else {
                writeLog("‚ùå Xato: Render brauzerdan ulanishni chekladi (CORS).");
            }
        } catch (err) {
            writeLog("‚ùå Tizim xatosi: " + err.message);
        }
    }

    function handleStop() {
        writeLog("üõë Loyihani to'xtatish (Suspend) hozircha faqat Render saytida ishlaydi.");
    }
</script>

</body>
</html>
